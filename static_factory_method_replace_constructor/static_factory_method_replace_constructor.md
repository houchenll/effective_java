
# 用静态工厂方法代替构造器

静态工厂方法和公有构造器各有长处，静态工厂通常更加合适，因此切忌第一反应就是提供公有的构造器，而不先考虑静态工厂  

## 优势
使用静态工厂方法而不是公有构造器的优势有：  

1. 静态工厂方法有名称  
首先：有名称的静态工厂方法比构造器更直观地表达对象的含义。  
其次：一个类只能有一个带指定签名的构造器，虽然可以通过改变构造器中参数的顺序，但这样做并不直观，如果没有详细的文档说明，用户往往不知所云。而静态工厂方法有名称，可以不受这个限制，为相同的签名提供不同的函数名，不仅更加直观，而且不受签名的限制。  

2. 不用在每次调用静态工厂方法时都提供一个新对象  
如果程序经常重复请求创建相同的对象，而且创建对象的成本很高，这项技术可以极大地提升性能。  
避免创建重复对象可以节省内存。  

3. 可以返回原返回类型任意子类型的对象  
这样在选择返回类型对象时就有了更大的灵活性。这种灵活性的一种使用是，API可以返回对象，又不会使对象的类变成公有的。以这种方式隐藏实现类会使API变得非常简洁，适用于基于接口的框架。因为接口不能有静态方法，所以接口Type的静态工厂方法一般放在名为Types的不可实例化的类中。  
公有的静态工厂方法返回的对象的类型不仅可以是非公有的，而且该类型还可以随着每次调用而发生变化。如为了提升软件的可维护性和性能，返回对象的类可能随着发行版本的不同而不同。  
静态工厂方法返回的对象所属的类，在编译包含该静态工厂方法的类时可以不必存在。  

4. 在创建参数化类型实现时，会使代码更简洁  


## 缺点

1. 类如果只含有静态工厂方法，不含有公有的或者受保护的构造器，就不能被子类化。不过这样也因祸得福，它鼓励程序员使用复合，而不是继承。  

2. 它们与其他静态方法实际上没有任何区别。在API文档中，它们没有像构造器那样在文档中明确标识出来，因此，对于提供了静态工厂方法而不是构造器的类来说，要查找到使用哪个方法来实例化类有些麻烦。为此，对静态工厂方法使用一些惯用方法名称，可以弥补这一缺点，常用的静态工厂方法名称有：  
valueOf -------- 该方法返回的实例与它的参数具有相同的值。这种静态方法实际上相当于类型转换   
of      -------- valueOf的简洁写法  
getInstance -------- 返回的实例通过方法的参数描述  
newInstance -------- 保证每次返回一个新实例